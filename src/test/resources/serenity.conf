environment = run_on_browserstack_Mac_Monterey

environments {

  run_on_browserstack_Windows11 {
    webdriver {
      driver = remote
      remote.url = "https://"${BROWSERSTACK_USER}":"${BROWSERSTACK_KEY}"@hub.browserstack.com/wd/hub"
      capabilities {
        browserName = "Chrome"
        "bstack:options" {
          os = "Windows"
          osVersion = "11"
          browserVersion = "latest"
          local = false
          seleniumVersion = "4.6.0"
          video = true
          idleTimeout = 300
          buildName = "browserstack-build-1"
          projectName = "BrowserStack Sample"
        }
      }
    }
  }
  run_on_browserstack_Mac_Monterey {

    webdriver {
      driver = remote
      remote.url = "https://"${BROWSERSTACK_USER}":"${BROWSERSTACK_KEY}"@hub.browserstack.com/wd/hub"
      capabilities {
        "bstack:options" {
          osVersion = "Monterey"
          browserName = "Safari"
          browserVersion = "15.6"
          buildName = "browserstack-build-1"
        }
      }
    }
  }

  local {
    webdriver.driver = chrome
    chrome {

      switches = [
        "--start-maximized",
        "--ignore-certificate-errors",
        "-incognito",
        "--accept-insecure-certs",
        "--acceptSslCerts",
        "--disable-popup-blocking",
        "--remote-allow-origins=*"
      ]

      preferences {
        download {
          prompt_for_download: false
          default_directory: "$TEMPDIR"
        }
      }
    }
  }

  localOwaspZap {
    webdriver.driver = chrome
    chrome {

      switches = [
        "--start-maximized",
        "--ignore-certificate-errors",
        "-incognito",
        "--accept-insecure-certs",
        "--acceptSslCerts",
        "--disable-popup-blocking",
        "--proxy-server= localhost:8050"
      ]

      preferences {
        download {
          prompt_for_download: false
          default_directory: "$TEMPDIR"
        }
      }
    }
  }

}
